@model archNoire.Models.EventAndPost
@using System.Data;



<style>
    .row {
        padding: 20px;
    }

    h2 {
        text-align: center;
    }

    .col-md-2 {
        border-right: 2px solid black;
    }

    .col {
        min-height: 100vh
    }

    img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
    }
</style>


<h2>page</h2>


<div class="row">
    <div class="col col-md-2">
        <img src="@ViewBag.photo" alt="profile picture" />
        <h3>@ViewBag.name</h3>
        <h3>@ViewBag.info  </h3>
        <h3> @ViewBag.email  </h3>
        <h3>@ViewBag.location</h3>


        <h3> @ViewBag.phone </h3>




    </div>
    <div class="col col-md-5">

        @using (Html.BeginForm("AddPost", "Page", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.TextBoxFor(EventAndPost => EventAndPost.Post.text, new { @class = "form-control", @type = "text", @required = "true", @placeholder = "text" })
            @Html.TextBoxFor(EventAndPost => EventAndPost.Post.location, new { @class = "form-control", @type = "text", @required = "true", @placeholder = "location" })


            <h2>upload postPhoto</h2>

            <br />

            <input type="file" name="postPhoto" id="pagePostPhoto" />

            <input id="addPagePost" type="submit" value="add post" />
        }
        <!--get posts-->
        <h2>wall</h2>
        @if (ViewBag.dposts != null)
        {
            <div class="posts">
                @{
                    int i = 0;
                    foreach (DataRow row in ViewBag.dposts.Rows)
                    {
                        <div class="post">

                            <div class="thumbnail">
                                @if (row["source"] != null)
                                {
                                    <img src="@row["source"].ToString()" style="border-radius:0;width:300px" />
                                }
                                <div class="caption">

                                    <p>@row["text"].ToString()</p>
                                    <p>@row["location"].ToString()</p>
                                    <p>@row["date"].ToString()</p>
                                </div>

                                <div class="icons">

                                    <i class="fa fa-thumbs-up"></i> like @row["no_of_likes"].ToString()

                                </div>
                                @if (ViewBag.comments[i] != null)
                                {
                                    <div class="comments">
                                        @foreach (DataRow rowComment in ViewBag.comments[i].Rows)
                                        {
                                            <p>@rowComment["text"].ToString()</p>
                                            <p>no of likes @rowComment["no_of_likes"].ToString()</p>


                                        }
                                    </div>
                                }
                            </div>

                        </div>
                        i++;
                    }
                }
            </div>
        }

    </div>
    <div class="col col-md-5">

        @using (Html.BeginForm("AddEvent", "Page", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.TextBoxFor(EventAndPost => EventAndPost.Event.location, new { @class = "form-control", @type = "text", @required = "true", @placeholder = "text" })
            @Html.TextBoxFor(EventAndPost => EventAndPost.Event.date, new { @class = "form-control", @type = "date", @required = "true", @placeholder = "location" })
            @Html.TextBoxFor(EventAndPost => EventAndPost.Event.price, new { @class = "form-control", @type = "number", @required = "true", @placeholder = "price of tickets" })


            <h2>upload event photo </h2>

            <br />

            <input type="file" name="eventPhoto" id="pageEventPhoto" />

            <input id="addPageEvent" type="submit" value="add event" />
        }

        <!--get events-->

        @if (ViewBag.events != null)
        {
            <div class="events">
                @{

                    foreach (DataRow row in ViewBag.events.Rows)
                    {
                        <div class="event">

                            <div class="thumbnail">
                                @if (row["source"] != null)
                                {
                                    <img src="@row["source"].ToString()" style="border-radius:0;width:300px" />
                                }
                                <div class="caption">

                                    <p>@row["ticket_price"].ToString()</p>
                                    <p>@row["location"].ToString()</p>

                                    <p>@row["date"].ToString()</p>
                                </div>

                                <div class="icons">

                                    <i class="fa fa-thumbs-up"></i> like @row["no_of_people_going"].ToString()

                                </div>

                            </div>

                        </div>

                    }
                }
            </div>
        }

      
        <!--get reviews-->

        @if (ViewBag.reviews != null)
        {
            <div class="reviews">
                @{

                    foreach (DataRow row in ViewBag.reviews.Rows)
                    {
                        <div class="review">
                            <h3> @row["name"].ToString() </h3>
                            <p> @row["text"].ToString() </p>
                     

                        </div>

                    }
                }
            </div>
        }

    </div>
</div>



@Html.Partial("_userFooter");
